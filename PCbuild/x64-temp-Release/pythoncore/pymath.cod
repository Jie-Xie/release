; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.40219.01 

include listing.inc

INCLUDELIB MSVCRT
INCLUDELIB OLDNAMES

PUBLIC	__real@3ff0000000000000
PUBLIC	__real@3fe0000000000000
PUBLIC	__mask@@AbsDouble@
PUBLIC	round
EXTRN	__imp__copysign:PROC
EXTRN	_fltused:DWORD
EXTRN	floor:PROC
;	COMDAT pdata
; File c:\src\pyparallel\python\pymath.c
pdata	SEGMENT
$pdata$round DD	imagerel $LN4
	DD	imagerel $LN4+86
	DD	imagerel $unwind$round
pdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$round DD 051201H
	DD	027812H
	DD	036809H
	DD	08204H
xdata	ENDS
;	COMDAT __real@3ff0000000000000
CONST	SEGMENT
__real@3ff0000000000000 DQ 03ff0000000000000r	; 1
CONST	ENDS
;	COMDAT __real@3fe0000000000000
CONST	SEGMENT
__real@3fe0000000000000 DQ 03fe0000000000000r	; 0.5
CONST	ENDS
;	COMDAT __mask@@AbsDouble@
CONST	SEGMENT
__mask@@AbsDouble@ DB 0ffH, 0ffH, 0ffH, 0ffH, 0ffH, 0ffH, 0ffH, 07fH, 0ffH
	DB	0ffH, 0ffH, 0ffH, 0ffH, 0ffH, 0ffH, 07fH
; Function compile flags: /Ogtpy
CONST	ENDS
;	COMDAT round
_TEXT	SEGMENT
x$ = 80
round	PROC						; COMDAT

; 71   : {

$LN4:
  00000	48 83 ec 48	 sub	 rsp, 72			; 00000048H
  00004	0f 29 74 24 30	 movaps	 XMMWORD PTR [rsp+48], xmm6

; 72   :     double absx, y;
; 73   :     absx = fabs(x);

  00009	66 0f 28 f0	 movapd	 xmm6, xmm0
  0000d	0f 29 7c 24 20	 movaps	 XMMWORD PTR [rsp+32], xmm7
  00012	66 0f 28 f8	 movapd	 xmm7, xmm0
  00016	66 0f 54 35 00
	00 00 00	 andpd	 xmm6, QWORD PTR __mask@@AbsDouble@

; 74   :     y = floor(absx);

  0001e	66 0f 28 c6	 movapd	 xmm0, xmm6
  00022	e8 00 00 00 00	 call	 floor

; 75   :     if (absx - y >= 0.5)

  00027	f2 0f 5c f0	 subsd	 xmm6, xmm0
  0002b	66 0f 2f 35 00
	00 00 00	 comisd	 xmm6, QWORD PTR __real@3fe0000000000000
  00033	72 08		 jb	 SHORT $LN1@round

; 76   :     y += 1.0;

  00035	f2 0f 58 05 00
	00 00 00	 addsd	 xmm0, QWORD PTR __real@3ff0000000000000
$LN1@round:

; 77   :     return copysign(y, x);

  0003d	66 0f 28 cf	 movapd	 xmm1, xmm7

; 78   : }

  00041	0f 28 74 24 30	 movaps	 xmm6, XMMWORD PTR [rsp+48]
  00046	0f 28 7c 24 20	 movaps	 xmm7, XMMWORD PTR [rsp+32]
  0004b	48 83 c4 48	 add	 rsp, 72			; 00000048H
  0004f	48 ff 25 00 00
	00 00		 rex_jmp QWORD PTR __imp__copysign
round	ENDP
_TEXT	ENDS
END
